{"version":3,"sources":["webpack:///./src/views/flight/FlightDetail.vue?198c","webpack:///./src/components/PassengerInfo.vue?bdaf","webpack:///src/components/PassengerInfo.vue","webpack:///./src/components/PassengerInfo.vue?43e0","webpack:///./src/components/PassengerInfo.vue","webpack:///src/views/flight/FlightDetail.vue","webpack:///./src/views/flight/FlightDetail.vue?9dc2","webpack:///./src/views/flight/FlightDetail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","slot","staticStyle","_v","_s","flight","flight_company","from_pos","start_time","flight_type","to_pos","end_time","on","$event","addPassenger","loading","users","scopedSlots","_u","key","fn","item","name","id_card","phone","deleted","price","length","confirm","visible","paddingBottom","onClose","user_info","id","_e","modelVisible","handleOk","cancelOk","staticRenderFns","form","handleSubmit","directives","rawName","value","rules","required","message","whitespace","expression","initialValue","component"],"mappings":"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","file":"static/js/chunk-2d230cc3.f319c5e0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-steps',[_c('a-step',{attrs:{\"status\":\"finish\",\"title\":\"信息确认\"}},[_c('a-icon',{attrs:{\"slot\":\"icon\",\"type\":\"form\"},slot:\"icon\"})],1),_c('a-step',{attrs:{\"status\":\"wait\",\"title\":\"待支付\"}},[_c('a-icon',{attrs:{\"slot\":\"icon\",\"type\":\"transaction\"},slot:\"icon\"})],1),_c('a-step',{attrs:{\"status\":\"wait\",\"title\":\"支付成功\"}},[_c('a-icon',{attrs:{\"slot\":\"icon\",\"type\":\"smile-o\"},slot:\"icon\"})],1)],1),_c('a-descriptions',{staticStyle:{\"margin-top\":\"2rem\"},attrs:{\"title\":\"航班信息确认\",\"layout\":\"vertical\",\"bordered\":\"\"}},[_c('a-descriptions-item',{attrs:{\"label\":\"航空公司\"}},[_vm._v(\" \"+_vm._s(_vm.flight.flight_company)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"起始地\"}},[_vm._v(\" \"+_vm._s(_vm.flight.from_pos)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"起飞时间\"}},[_vm._v(\" \"+_vm._s(_vm.flight.start_time)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"飞机型号\"}},[_vm._v(\" \"+_vm._s(_vm.flight.flight_type)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"到达地\"}},[_vm._v(\" \"+_vm._s(_vm.flight.to_pos)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"到达时间\"}},[_vm._v(\" \"+_vm._s(_vm.flight.end_time)+\" \")])],1),_c('a-row',{staticStyle:{\"margin\":\"2rem 0rem\"},attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('a-col',{attrs:{\"span\":18}},[_vm._v(\" 乘客信息列表 \")]),_c('a-col',{attrs:{\"span\":4}},[_c('a-button',{staticStyle:{\"margin-right\":\"2rem\"},attrs:{\"type\":\"info\"},on:{\"click\":function($event){return _vm.addPassenger()}}},[_vm._v(\"添加乘客信息\")])],1)],1),_c('a-list',{attrs:{\"loading\":_vm.loading,\"item-layout\":\"horizontal\",\"data-source\":_vm.users},scopedSlots:_vm._u([{key:\"renderItem\",fn:function(item){return _c('a-list-item',{staticStyle:{\"padding\":\"0 5rem\"}},[_c('a-list-item-meta',[_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',{staticStyle:{\"margin-left\":\"5rem\",\"width\":\"10rem\"}},[_vm._v(_vm._s('姓名：' + item.name))]),_c('span',{staticStyle:{\"margin-left\":\"5rem\",\"width\":\"10rem\"}},[_vm._v(_vm._s(' 身份证: ' + item.id_card))]),_c('span',{staticStyle:{\"margin-left\":\"5rem\",\"width\":\"10rem\"}},[_vm._v(_vm._s(' 手机号码：' + item.phone))])])]),_c('a-button',{attrs:{\"type\":\"danger\",\"shape\":\"round\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.deleted(item.id_card)}}},[_vm._v(\"删除\")])],1)}}])}),_c('a-row',{staticStyle:{\"margin-top\":\"2rem\"},attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('a-col',{attrs:{\"span\":4}},[_c('span',{staticStyle:{\"font-weight\":\"700\",\"font-size\":\"20px\"}},[_vm._v(\"价格:\"),_c('span',{staticStyle:{\"color\":\"red\",\"margin-left\":\"1rem\"}},[_vm._v(\"￥\"+_vm._s(_vm.flight.price * this.users.length))])])]),_c('a-col',{attrs:{\"span\":4}},[_c('a-button',{staticStyle:{\"margin-right\":\"2rem\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.confirm()}}},[_vm._v(\"确认\")])],1)],1),(_vm.reFresh)?_c('a-drawer',{attrs:{\"title\":\"乘客信息登记\",\"width\":720,\"visible\":_vm.visible,\"body-style\":{ paddingBottom: '80px' }},on:{\"close\":_vm.onClose}},[_c('PassengerInfo',{attrs:{\"user_info\":_vm.user_info,\"flight_id\":_vm.id}})],1):_vm._e(),_c('a-modal',{attrs:{\"visible\":_vm.modelVisible,\"title\":\"确认弹窗\",\"ok-text\":\"确认\",\"cancel-text\":\"取消\"},on:{\"ok\":_vm.handleOk,\"cancel\":_vm.cancelOk}},[_c('p',[_vm._v(\"是否确认购买机票\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"60%\",\"margin\":\"0 auto\"}},[_c('a-form',{attrs:{\"form\":_vm.form},on:{\"submit\":_vm.handleSubmit}},[_c('a-form-item',{attrs:{\"has-feedback\":\"\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" 姓名 \")]),_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                'name',\n                {\n                    rules: [{ required: true, message: '请输入您的姓名', whitespace: true }],\n                } ]),expression:\"[\\n                'name',\\n                {\\n                    rules: [{ required: true, message: '请输入您的姓名', whitespace: true }],\\n                },\\n                ]\"}]})],1),_c('a-form-item',{attrs:{\"has-feedback\":\"\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" 身份证号码 \")]),_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                'id_card',\n                {\n                    rules: [{ required: true, message: '请输入您的身份证号码', whitespace: true }],\n                } ]),expression:\"[\\n                'id_card',\\n                {\\n                    rules: [{ required: true, message: '请输入您的身份证号码', whitespace: true }],\\n                },\\n                ]\"}]})],1),_c('a-form-item',{attrs:{\"label\":\"手机号码\"}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                'phone',\n                {\n                    rules: [{ required: true, message: '请输入你的手机号码!' }],\n                } ]),expression:\"[\\n                'phone',\\n                {\\n                    rules: [{ required: true, message: '请输入你的手机号码!' }],\\n                },\\n                ]\"}],staticStyle:{\"width\":\"100%\"}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['prefix', { initialValue: '86' }]),expression:\"['prefix', { initialValue: '86' }]\"}],staticStyle:{\"width\":\"70px\"},attrs:{\"slot\":\"addonBefore\"},slot:\"addonBefore\"},[_c('a-select-option',{attrs:{\"value\":\"86\"}},[_vm._v(\" +86 \")])],1)],1)],1),_c('a-form-item',[_c('a-button',{attrs:{\"type\":\"primary\",\"html-type\":\"submit\"}},[_vm._v(\" 添加 \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div style=\"width: 60%; margin: 0 auto\">\r\n        <a-form :form=\"form\" @submit=\"handleSubmit\">\r\n            <a-form-item has-feedback>\r\n                <span slot=\"label\">\r\n                    姓名\r\n                </span>\r\n                <a-input\r\n                    v-decorator=\"[\r\n                    'name',\r\n                    {\r\n                        rules: [{ required: true, message: '请输入您的姓名', whitespace: true }],\r\n                    },\r\n                    ]\"\r\n                />\r\n            </a-form-item>\r\n            <a-form-item has-feedback>\r\n                <span slot=\"label\">\r\n                    身份证号码\r\n                </span>\r\n                <a-input\r\n                    v-decorator=\"[\r\n                    'id_card',\r\n                    {\r\n                        rules: [{ required: true, message: '请输入您的身份证号码', whitespace: true }],\r\n                    },\r\n                    ]\"\r\n                />\r\n            </a-form-item>\r\n            <a-form-item label=\"手机号码\">\r\n                <a-input\r\n                    v-decorator=\"[\r\n                    'phone',\r\n                    {\r\n                        rules: [{ required: true, message: '请输入你的手机号码!' }],\r\n                    },\r\n                    ]\"\r\n                    style=\"width: 100%\"\r\n                >\r\n                    <a-select\r\n                    slot=\"addonBefore\"\r\n                    v-decorator=\"['prefix', { initialValue: '86' }]\"\r\n                    style=\"width: 70px\"\r\n                    >\r\n                    <a-select-option value=\"86\">\r\n                        +86\r\n                    </a-select-option>\r\n                    </a-select>\r\n                </a-input>\r\n            </a-form-item>\r\n            <a-form-item>\r\n                <a-button type=\"primary\" html-type=\"submit\">\r\n                    添加\r\n                </a-button>\r\n            </a-form-item>\r\n        </a-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'PassengerInfo',\r\n    props: {\r\n        user_info: {\r\n            type: Object,\r\n        },\r\n        flight_id: {\r\n            type: String,\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            passenger: {}\r\n        }\r\n    }, \r\n    beforeCreate() {\r\n        this.form = this.$form.createForm(this, { name: 'register' });\r\n    },\r\n    methods: {\r\n        handleSubmit(e) {\r\n            this.loading = true\r\n            e.preventDefault();\r\n            this.form.validateFieldsAndScroll((err, values) => {\r\n                if (!err) {\r\n                    let param = {\r\n                        id_card: values['id_card'],\r\n                        phone: values['phone'],\r\n                        flight_id: this.flight_id,\r\n                        name: values['name'],\r\n                        account_id: this.user_info.id\r\n                    }\r\n                    this.$flight_api.post_passenger(param).then((res) => {\r\n                        console.log(res)\r\n                        if (res.code == 200) {\r\n                            this.passenger = res.data\r\n                            this.$message.success('添加乘客成功! ');\r\n                            this.$router.go(0)\r\n                        } else {\r\n                            this.$message.error('添加乘客信息失败! ' + res.msg);\r\n                        }\r\n                        this.loading = false\r\n                    }).catch(() => {\r\n                        this.$message.error('乘客信息已经存在! ');\r\n                    })\r\n                } else {\r\n                    this.loading = false\r\n                }\r\n            });\r\n        },\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PassengerInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PassengerInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PassengerInfo.vue?vue&type=template&id=f48f258e&\"\nimport script from \"./PassengerInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./PassengerInfo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div>\r\n        <a-steps>\r\n            <a-step status=\"finish\" title=\"信息确认\">\r\n            <a-icon slot=\"icon\" type=\"form\" />\r\n            </a-step>\r\n            <a-step status=\"wait\" title=\"待支付\">\r\n            <a-icon slot=\"icon\" type=\"transaction\" />\r\n            </a-step>\r\n            <a-step status=\"wait\" title=\"支付成功\">\r\n                <a-icon slot=\"icon\" type=\"smile-o\" />\r\n            </a-step>\r\n        </a-steps>\r\n\r\n        <a-descriptions title=\"航班信息确认\" layout=\"vertical\" bordered style=\"margin-top: 2rem;\">\r\n            <a-descriptions-item label=\"航空公司\">\r\n            {{ flight.flight_company }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"起始地\">\r\n            {{ flight.from_pos }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"起飞时间\">\r\n            {{ flight.start_time }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"飞机型号\">\r\n            {{ flight.flight_type }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"到达地\">\r\n            {{ flight.to_pos }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"到达时间\">\r\n            {{ flight.end_time }}\r\n            </a-descriptions-item>\r\n        </a-descriptions>\r\n\r\n        <a-row type=\"flex\" justify=\"end\" style=\"margin: 2rem 0rem;\">\r\n            <a-col :span=\"18\">\r\n                乘客信息列表\r\n            </a-col>\r\n            <a-col :span=\"4\">\r\n                <a-button\r\n                    type=\"info\"\r\n                    @click=\"addPassenger()\"\r\n                    style=\"margin-right: 2rem\"\r\n                    >添加乘客信息</a-button\r\n                >\r\n            </a-col>\r\n            \r\n        </a-row>\r\n        <a-list\r\n            :loading=\"loading\"\r\n            item-layout=\"horizontal\"\r\n            :data-source=\"users\"\r\n        >\r\n            <a-list-item slot=\"renderItem\" slot-scope=\"item\" style=\"padding: 0 5rem;\">\r\n                <a-list-item-meta>\r\n                    <span slot=\"title\">\r\n                        <span style=\"margin-left: 5rem; width: 10rem;\">{{ '姓名：' + item.name }}</span>\r\n                        <span style=\"margin-left: 5rem; width: 10rem;\">{{ ' 身份证: ' + item.id_card }}</span>\r\n                        <span style=\"margin-left: 5rem; width: 10rem;\">{{ ' 手机号码：' + item.phone }}</span>\r\n                    </span>\r\n                </a-list-item-meta>\r\n                <a-button  type=\"danger\" shape=\"round\" size=\"small\"  @click=\"deleted(item.id_card)\">删除</a-button>\r\n            </a-list-item>\r\n        </a-list>\r\n        <a-row type=\"flex\" justify=\"end\" style=\"margin-top: 2rem;\">\r\n            <a-col :span=\"4\">\r\n                <span style=\"font-weight: 700; font-size: 20px; \">价格:<span style=\"color: red; margin-left: 1rem;\">￥{{ flight.price * this.users.length }}</span></span>\r\n            </a-col>\r\n            <a-col :span=\"4\">\r\n                <a-button\r\n                    type=\"primary\"\r\n                    @click=\"confirm()\"\r\n                    style=\"margin-right: 2rem\"\r\n                    >确认</a-button\r\n                >\r\n            </a-col>\r\n        </a-row>\r\n\r\n        <a-drawer\r\n            v-if=\"reFresh\"\r\n            title=\"乘客信息登记\"\r\n            :width=\"720\"\r\n            :visible=\"visible\"\r\n            :body-style=\"{ paddingBottom: '80px' }\"\r\n            @close=\"onClose\"\r\n        >\r\n            <PassengerInfo :user_info=\"user_info\" :flight_id=\"id\"></PassengerInfo>   \r\n        </a-drawer>\r\n\r\n\r\n        <a-modal\r\n            :visible=\"modelVisible\"\r\n            title=\"确认弹窗\"\r\n            ok-text=\"确认\"\r\n            cancel-text=\"取消\"\r\n            @ok=\"handleOk\"\r\n            @cancel=\"cancelOk\"\r\n            >\r\n            <p>是否确认购买机票</p>\r\n        </a-modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getTaskTime } from '../../utils/common'\r\nimport PassengerInfo from \"@/components/PassengerInfo.vue\";\r\n\r\nexport default {\r\n    name: 'FlightDetail',\r\n    components: {\r\n        PassengerInfo\r\n    },\r\n    data() {\r\n        return {\r\n            id: this.$route.params.id,\r\n            flight: {},\r\n            users: [],\r\n            visible: false,\r\n            reFresh: true,\r\n            user_info: {},\r\n            loading: false,\r\n            modelVisible: false\r\n        }\r\n    }, \r\n    mounted() {\r\n        this.get_userinfo()\r\n        this.get_flight(this.id)\r\n    },\r\n    methods: {\r\n        // 获取用户信息\r\n        get_userinfo() {\r\n            this.$user_api.user_info().then((res) => {\r\n                // 请求后端数据\r\n                if (res.code == 200) {\r\n                    this.user_info = res.data;\r\n                    console.log(this.user_info);\r\n                    this.get_passengers()\r\n                } else {\r\n                    this.$message.error(\"用户信息获取失败:\" + res.msg);\r\n                    localStorage.removeItem(\"token\");\r\n                    this.$router.push({\r\n                        path: `/login`,\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        // 返回航班详细信息\r\n        get_flight(flight_id) {\r\n            let param = { \r\n                'flight_id': flight_id\r\n            }\r\n            this.loading = true\r\n            this.$flight_api.get_flight(param).then((res) => {\r\n                console.log(res)\r\n                if (res.code == 200) {\r\n                    this.flight = res.data\r\n                    this.flight.start_time = getTaskTime(this.flight.start_time)\r\n                    this.flight.end_time = getTaskTime(this.flight.end_time)\r\n                } else {\r\n                    this.$message.error('请求数据失败! ' + res.msg);\r\n                }\r\n                this.loading = false\r\n                \r\n            })\r\n        },\r\n\r\n        // 获取乘客列表\r\n        get_passengers() {\r\n            this.loading = true\r\n            let param = {\r\n                flight_id: this.id,\r\n                account_id: this.user_info.id\r\n            }\r\n            console.log(param)\r\n            this.$flight_api.get_passenger(param).then((res) => {\r\n                // 请求后端数据\r\n                console.log(res)\r\n                if (res.code == 200) {\r\n                    this.users = res.data;\r\n                } else {\r\n                    this.$message.error(\"乘客信息获取失败:\" + res.msg);\r\n                }\r\n                this.loading = false\r\n            });\r\n        }, \r\n\r\n        // 弹窗确认信息\r\n        confirm() {\r\n            if (this.users.length == 0) {\r\n                this.$message.error('请添加至少一位乘客');\r\n            } else {\r\n                this.modelVisible = true\r\n            }\r\n        }, \r\n\r\n        // 关闭弹窗\r\n        cancelOk() {\r\n            this.modelVisible = false;\r\n        },\r\n\r\n        // 生成订单\r\n        handleOk() {\r\n            this.loading = true\r\n            let param = {\r\n                money: this.flight.price * this.users.length,\r\n                flight_id: this.id,\r\n                account_id: this.user_info.id\r\n            }\r\n\r\n            this.$flight_api.post_order(param).then((res) => {\r\n                // 请求后端数据\r\n                console.log(res)\r\n                if (res.code == 200) {\r\n                    this.$message.success(\"生成订单成功\");\r\n                    // 跳转路由\r\n                    this.$router.push({\r\n                        path: `/wait-pay/${res.data.id}`,\r\n                    });\r\n                    window.open(`http://localhost:5000/order/pay?order_id=${res.data.id}&money=${res.data.money}&name=航班--${this.flight.flight_type}`,\"_blank\");\r\n                } else {\r\n                    this.$message.error(\"生成订单失败:\" + res.msg);\r\n                }\r\n                this.loading = false\r\n            });\r\n            \r\n        },\r\n\r\n        // 添加客户信息\r\n        addPassenger() {\r\n            this.visible = true\r\n            this.reFresh = false\r\n            this.$nextTick(() => {\r\n                this.reFresh = true\r\n            })\r\n        },\r\n\r\n        // 关闭抽屉界面\r\n        onClose() {\r\n            this.visible = false\r\n        },\r\n\r\n        // 删除乘客\r\n        deleted(id_card) {\r\n            this.loading = true\r\n            let param = {\r\n                id_card: id_card,\r\n                account_id: this.user_info.id\r\n            }\r\n            console.log(param)\r\n            this.$flight_api.remove_passenger(param).then((res) => {\r\n                // 请求后端数据\r\n                console.log(res)\r\n                if (res.code == 200) {\r\n                    this.users = res.data;\r\n                    this.$message.success(\"删除乘客信息成功！\");\r\n                } else {\r\n                    this.$message.error(\"删除乘客信息失败:\" + res.msg);\r\n                }\r\n                this.loading = false\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FlightDetail.vue?vue&type=template&id=7e608cfb&\"\nimport script from \"./FlightDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./FlightDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}