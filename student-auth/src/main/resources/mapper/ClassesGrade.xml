<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.studentauth.dao.ClassGradeDao">
    <insert id="insertClassesGrade" useGeneratedKeys="true" keyColumn="grade_id" keyProperty="gradeId">
        INSERT INTO
        tb_classes_grade(excel_id,classes_name,avg_class_grade,avg_work_grade,avg_last_grade,avg_exp_grade
        ,avg_all_grade,user_id,student_count,class_point,work_point,last_point,exp_point,all_point)
        VALUES
        (#{excelId},#{classesName},#{avgClassGrade},#{avgWorkGrade},#{avgLastGrade},
        #{avgExpGrade},#{avgAllGrade},#{userId},#{studentCount},#{classPoint},
        #{workPoint},#{lastPoint},#{expPoint},#{allPoint})
    </insert>
    <select id="queryClassGradeList" resultType="com.example.studentauth.entity.ClassesGrade" parameterType="Long">
        SELECT
        excel_id,
        classes_name,
        avg_class_grade,
        avg_work_grade,
        avg_last_grade,
        avg_exp_grade,
        avg_all_grade,
        user_id,
        student_count,
        grade_id,
        class_point,
        work_point,
        last_point,
        exp_point,
        all_point
        FROM
        tb_classes_grade
        WHERE
        user_id=#{userId}
        ORDER BY
        grade_id ASC
    </select>
    <select id="queryClassesGrade" resultType="com.example.studentauth.entity.ClassesGrade">
        SELECT
        excel_id,
        classes_name,
        avg_class_grade,
        avg_work_grade,
        avg_last_grade,
        avg_exp_grade,
        avg_all_grade,
        user_id,
        student_count,
        grade_id,
        class_point,
        work_point,
        last_point,
        exp_point,
        all_point
        FROM
        tb_classes_grade
        WHERE
        excel_id=#{excelId}
    </select>
    <delete id="deleteClassGrade">
        DELETE FROM
        tb_classes_grade
        WHERE
        grade_id=#{gradeId}
        AND excel_id=#{excelId}
    </delete>
    <update id="updateClassGrade" parameterType="com.example.studentauth.entity.ClassesGrade">
        update tb_classes_grade
        <set>
            <if test="excelId!=null">excel_id=#{excelId},</if>
            <if test="classesName!=null">classes_name=#{classesName},</if>
            <if test="avgClassGrade!=null">avg_class_grade=#{avgClassGrade},</if>
            <if test="avgWorkGrade!=null">avg_work_grade=#{avgWorkGrade},</if>
            <if test="avgLastGrade!=null">avg_last_grade=#{avgLastGrade},</if>
            <if test="avgExpGrade!=null">avg_exp_grade=#{avgExpGrade},</if>
            <if test="avgAllGrade!=null">avg_all_grade=#{avgAllGrade},</if>
            <if test="studentCount!=null">student_count=#{studentCount},</if>
            <if test="userId!=null">user_id=#{userId},</if>
            <if test="classPoint!=null">class_point=#{classPoint},</if>
            <if test="workPoint!=null">work_point=#{workPoint},</if>
            <if test="lastPoint!=null">last_point=#{lastPoint},</if>
            <if test="expPoint!=null">exp_point=#{expPoint},</if>
            <if test="allPoint!=null">all_point=#{allPoint}</if>
        </set>
        where excel_id=#{excelId}
    </update>
</mapper>